## 版本5

使用unix域协议，熟悉unix域套接字编程。这个实现以version_2为基础，进行实现。

unix域套接字的优点：相比于IPC，其和C/S使用的API几乎相同；相比于运行在同一主机上的TCP，它的性能更好。

### 用途

1、传递描述符。用于在任意两个本机进程间传递描述符。传递描述符是指，在一个进程打开一个描述符后，将这个描述符（不是描述符号）发送给另一个进程使用。（发送描述符会使描述符计数加1）一般会借助recvmsg以及msghdr的辅助数据传递描述符。详见unix网络编程15.7

2、接收发送者的凭证。同样也使用sendmsg和recvmsg，使用辅助数据传送cmsgcred结构

### 要点

1、unix域协议是一种IPC通信方式，不需要IP地址，但是为了标识需要为套接字绑定一个文件路径。

2、地址结构和地址类型也发生了改变，参见sockaddr文件夹下面的文件进行了解。

3、同时使用的大部分函数没有改变，所以TCP，UDP对应的函数可以继续使用。

4、在绑定路径前，如果路径已经存在，bind将会失败，所以先使用unlink删除路径，然后绑定。这也导致不能运行绑定相同路径名的服务器程序两次。

### 程序出现的错误

1、客户端程序也需要使用root权限，否则连接失败。

### 总结

可见，unix域协议只是将TCP协议的地址换成本地路径名，其余并没有改变。但是对于UDP程序，需要为客户程序也绑定一个路径。
